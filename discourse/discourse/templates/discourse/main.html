{% extends 'base.html' %}

<!-- loading static -->


{% block static %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'discourse/css/main.css' %}">

<!-- loading of other resources -->
<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>

{% endblock %}

{% block html %}


    <div class="container">
        <div class="row">
            <div class="[ col-xs-12 col-sm-offset-2 col-sm-8 ]" id='display'>
                <ul class="event-list" id="event-list" v-if="topics">
                    <li id="topic" v-for="topic in topics">
                        <time datetime="2014-07-20">
                            <span class="day">[[ topic.timestamp ]]</span>
                            <span class="month">[[ topic.month ]]</span>
                            <span class="year">2014</span>
                            <span class="time">ALL DAY</span>
                        </time>
                        <img alt="Independence Day" src="https://farm4.staticflickr.com/3100/2693171833_3545fb852c_q.jpg" />
                        <div class="info">
                            <h2 class="title">[[ topic.topic ]]</h2>
                            <p class="desc">[[ topic.short_description ]]</p>
                        </div>
                        <div class="social">
                            <ul>
                                <li class="facebook" style="width:33%;"><a href="#facebook"><span class="fa fa-facebook"></span></a></li>
                                <li class="twitter" style="width:34%;"><a href="#twitter"><span class="fa fa-twitter"></span></a></li>
                                <li class="google-plus" style="width:33%;"><a href="#google-plus"><span class="fa fa-google-plus"></span></a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <p v-else>Loading...</p>
            </div>
        </div>
    </div>

<script type="text/javascript">
    vm = new Vue({
        delimiters: ["[[", "]]"],
        el: '#display',
        data:{
            topics: null
        },
        mounted(){
            axios.get("{% url 'discourse:get-topics-api'%}").then(response => (this.topics = response.data))
        }
    })

    setInterval(function(){
        axios.get("{% url 'discourse:get-topics-api'%}").then(response => (vm.topics = response.data))
    }, 10000);


</script>
{% endblock %}